<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Actualités filtrables - MonSite</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Lightbox2 -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/css/lightbox.min.css" rel="stylesheet" />

  <!-- Style perso -->
  <link href="style.css" rel="stylesheet">

  <style>
   .card-img-top {
  width: 100%;
  height: 350px; /* Augmente la hauteur */
  object-fit: contain; /* Affiche toute l'image sans la couper */
  background-color: #f8f9fa; /* Optionnel : fond clair pour combler si vide */
}

    }
    .card {
      cursor: default;
    }
    .filter-label {
      font-weight: 600;
      margin-right: 10px;
    }
    body {
      padding-top: 70px;
      background-color: antiquewhite;
    }
    /* Optionnel : style bouton lire plus */
    .btn-link {
      cursor: pointer;
      font-weight: 600;
    }
  </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
  <div class="container">
    <a class="navbar-brand" href="#">PASTEF-COMMUNE</a>
    <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#menu">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="menu">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="index.html">À propos</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Portfolio</a>
          <ul class="dropdown-menu dropdown-menu-dark">
            <li><a class="dropdown-item" href="portfolio-videos.html">Mes Vidéos</a></li>
            <li><a class="dropdown-item" href="portfolio-photos.html">Mes Photos</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="actualitesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Actualités
          </a>
          <ul class="dropdown-menu dropdown-menu-dark">
            <li><a class="dropdown-item" href="actualites.html">Toutes les actualités</a></li>
            <li><a class="dropdown-item" href="reunions.html">Réunions</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Filtres -->
<section class="py-4 bg-white">
  <div class="container d-flex flex-wrap align-items-center gap-3">
    <div>
      <label class="filter-label" for="filterYear">Filtrer par année :</label>
      <select id="filterYear" class="form-select d-inline-block w-auto">
        <option value="all">Toutes</option>
        <option value="2025">2025</option>
        <option value="2024">2024</option>
        <option value="2023">2023</option>
      </select>
    </div>
    <div>
      <label class="filter-label" for="filterCategory">Filtrer par catégorie :</label>
      <select id="filterCategory" class="form-select d-inline-block w-auto">
        <option value="all">Toutes</option>
        <option value="evenement">Événements</option>
        <option value="projet">Projets</option>
        <option value="annonce">Annonces</option>
      </select>
    </div>
  </div>
</section>

<!-- Actualités -->
<section class="py-5">
  <div class="container">
    <h2 class="mb-4">Actualités récentes</h2>
    <div class="row g-4" id="newsContainer"></div>
  </div>
</section>

<!-- Footer -->
<footer class="text-center text-white bg-primary py-3">
  <div class="container">&copy; 2025 MonSite. Tous droits réservés.</div>
</footer>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/js/lightbox.min.js"></script>

<script>
  const newsData = [
    {
      id: 1,
      titre: "Rencontre citoyenne à Keur Manogo",
      date: "2025-06-05",
      categorie: "evenement",
      image: "am1.jpg",
      description: "Le 5 juin 2025, la section communale de PASTEF a organisé une rencontre citoyenne à Keur Manogo. Cet événement a permis un échange direct entre les représentants du parti et les habitants, autour des enjeux majeurs qui touchent la communauté. Objectif : identifier les priorités de développement local en donnant la parole aux citoyens, dans une démarche participative et transparente. Cette initiative s’inscrit dans la volonté du mouvement de bâtir une gouvernance locale plus inclusive, centrée sur les réalités du terrain et les aspirations des populations.",
      lien: "#"
    },
    {
      id: 2,
      titre: "Lancement d’un nouveau projet communautaire",
      date: "2025-05-15",
      categorie: "projet",
      image: "rakhmane.jpg",
      description: "Un projet d’assainissement a été lancé avec la participation active de la jeunesse locale. L’objectif est de nettoyer les caniveaux, améliorer l’évacuation des eaux usées, réduire les risques d’inondation et sensibiliser la population sur les gestes écologiques et citoyens. Ce programme comprend des opérations régulières de curage, la mise en place de points de collecte des déchets, ainsi que des séances de formation et de sensibilisation dans les écoles, les quartiers et les lieux publics. Il s’inscrit dans une démarche durable visant à renforcer la résilience de la commune face aux changements climatiques, à améliorer le cadre de vie et à encourager l’implication des jeunes dans le développement local.",
      lien: "#"
    },
    {
      id: 3,
      titre: "Annonce importante sur la santé locale",
      date: "2024-12-10",
      categorie: "annonce",
      image: "gu.jpg",
      description: "Cette campagne vise à renforcer la couverture vaccinale de la population, en particulier des groupes les plus vulnérables : enfants, personnes âgées, femmes enceintes, mais aussi les jeunes et adultes non encore vaccinés. Les vaccins proposés couvrent plusieurs maladies graves et évitables, notamment : tétanos, rougeole, poliomyélite, hépatite B, tuberculose (BCG) et fièvre jaune. Des équipes mobiles seront déployées dans les quartiers, villages et centres de santé pour faciliter l’accès aux vaccins. Des séances d’information seront également organisées pour répondre aux questions et lutter contre les idées reçues.",
      lien: "#"
    },
    {
      id: 4,
      titre: "Fête annuelle des jeunes",
      date: "2023-08-20",
      categorie: "evenement",
      image: "fall.png",
      description: "Une grande fête sera organisée pour célébrer la jeunesse locale. Au programme : concerts, compétitions sportives, animations culturelles et échanges sur le rôle des jeunes dans le développement de la commune.",
      lien: "#"
    },
  ];

  const newsContainer = document.getElementById("newsContainer");
  const filterYear = document.getElementById("filterYear");
  const filterCategory = document.getElementById("filterCategory");

  function truncateText(text, maxLength = 150) {
    if (text.length <= maxLength) return text;
    return text.slice(0, maxLength) + '...';
  }

  function afficherActualites() {
    const year = filterYear.value;
    const category = filterCategory.value;

    const filteredNews = newsData.filter(item => {
      const itemYear = item.date.slice(0, 4);
      const matchYear = (year === "all" || itemYear === year);
      const matchCategory = (category === "all" || item.categorie === category);
      return matchYear && matchCategory;
    });

    if (filteredNews.length === 0) {
      newsContainer.innerHTML = `<p class="text-center">Aucune actualité trouvée pour ces filtres.</p>`;
      return;
    }

    newsContainer.innerHTML = filteredNews.map(item => {
      const isLong = item.description.length > 150;
      const shortDescription = truncateText(item.description, 150);

      return `
        <div class="col-md-6">
          <div class="card h-100 shadow-sm">
            <a href="${item.image}" data-lightbox="news-gallery" data-title="${item.titre}">
              <img src="${item.image}" class="card-img-top" alt="${item.titre}" onerror="this.src='https://via.placeholder.com/400x250?text=Image+non+disponible';">
            </a>
            <div class="card-body">
              <h5 class="card-title">${item.titre}</h5>
              <small class="text-muted">${new Date(item.date).toLocaleDateString('fr-FR')}</small>
              <p class="card-text mt-2" id="desc-${item.id}">${shortDescription}</p>
              ${isLong ? `<button class="btn btn-link p-0" data-id="${item.id}" id="btn-${item.id}">Lire Plus</button>` : ''}
            </div>
          </div>
        </div>
      `;
    }).join("");

    filteredNews.forEach(item => {
      if (item.description.length > 150) {
        const btn = document.getElementById(`btn-${item.id}`);
        const desc = document.getElementById(`desc-${item.id}`);
        btn.addEventListener("click", () => {
          if (btn.textContent === "Lire Plus") {
            desc.textContent = item.description;
            btn.textContent = "Lire Moins";
          } else {
            desc.textContent = truncateText(item.description, 150);
            btn.textContent = "Lire Plus";
          }
        });
      }
    });
  }

  filterYear.addEventListener("change", afficherActualites);
  filterCategory.addEventListener("change", afficherActualites);
  afficherActualites();
</script>

</body>
</html>
